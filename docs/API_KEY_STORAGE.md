# 🔑 API Key 本地保存功能

## 功能说明

系统现在支持将 DeepSeek API Key 保存到本地，这样在同一台电脑上使用时就不需要每次都重新输入。

## ✨ 主要特性

- ✅ **自动加载**：启动时自动从本地加载保存的 API Key
- ✅ **自动保存**：输入新的 API Key 后会自动保存到本地
- ✅ **手动管理**：可以手动保存或清除 API Key
- ✅ **安全存储**：使用 Base64 编码存储（不是完全明文）
- ✅ **多电脑独立**：每台电脑的配置独立，互不影响

## 📁 存储位置

API Key 保存在项目根目录下的配置文件中：
```
.deepseek_config.json
```

**注意**：此文件已添加到 `.gitignore`，不会被提交到 Git 仓库，确保安全。

## 🔒 安全性说明

- API Key 使用 Base64 编码存储（不是真正的加密，但可以避免完全明文）
- 配置文件保存在本地，不会上传到任何服务器
- 文件已添加到 `.gitignore`，不会被意外提交到代码仓库
- **建议**：不要将配置文件分享给他人或上传到公共位置

## 📖 使用方法

### 首次使用

1. **输入 API Key**
   - 在侧边栏的"DeepSeek API密钥"输入框中输入您的 API Key
   - API Key 会自动保存到本地

2. **手动保存**（可选）
   - 点击"💾 保存密钥"按钮可以手动保存
   - 如果已经自动保存，会显示保存时间

### 后续使用

- **自动加载**：启动应用时，如果检测到本地保存的 API Key，会自动加载并显示
- **无需输入**：如果 API Key 已保存，可以直接使用，无需重新输入

### 更新 API Key

1. **输入新 Key**：在输入框中输入新的 API Key
2. **自动保存**：新 Key 会自动保存，替换旧的
3. **手动保存**：也可以点击"💾 保存密钥"按钮手动保存

### 清除 API Key

1. **点击清除**：点击"🗑️ 清除密钥"按钮
2. **确认清除**：本地保存的 API Key 会被删除
3. **重新输入**：下次使用时需要重新输入

## 🖥️ 多电脑使用

- **每台电脑独立**：每台电脑的 API Key 配置是独立的
- **不会同步**：在一台电脑上保存的 Key 不会自动同步到其他电脑
- **重新输入**：在其他电脑上首次使用时需要重新输入 API Key

## 📋 配置文件格式

配置文件使用 JSON 格式：

```json
{
  "api_key": "base64编码的API密钥",
  "saved_at": "2024-12-01 14:30:22"
}
```

## ⚙️ 技术细节

### 编码方式
- 使用 Base64 编码存储 API Key
- 不是真正的加密，但可以避免完全明文存储
- 可以防止简单的文本查看

### 文件位置
- 配置文件：`.deepseek_config.json`
- 保存在项目根目录
- 文件以点开头，在大多数系统中是隐藏文件

### 错误处理
- 如果配置文件损坏或不存在，会静默失败
- 如果解码失败，会返回空值，提示用户重新输入
- 保存失败时会显示错误提示

## 🔧 常见问题

### Q: API Key 保存在哪里？
A: 保存在项目根目录下的 `.deepseek_config.json` 文件中。

### Q: 安全吗？
A: 
- API Key 使用 Base64 编码存储（不是完全明文）
- 文件保存在本地，不会上传到服务器
- 文件已添加到 `.gitignore`，不会被提交到代码仓库
- **注意**：这不是真正的加密，如果有人能访问您的电脑文件，仍然可以看到 API Key

### Q: 如何清除保存的 API Key？
A: 点击侧边栏的"🗑️ 清除密钥"按钮即可清除。

### Q: 在其他电脑上需要重新输入吗？
A: 是的，每台电脑的配置是独立的，需要在每台电脑上单独保存。

### Q: 可以手动编辑配置文件吗？
A: 可以，但不建议。如果文件格式错误，系统会无法读取，需要重新输入。

### Q: 配置文件损坏了怎么办？
A: 删除 `.deepseek_config.json` 文件，然后重新输入 API Key 即可。

### Q: 如何备份 API Key？
A: 可以复制 `.deepseek_config.json` 文件到其他位置，但要注意安全。

## 🚀 快速开始

1. **首次使用**：
   - 输入 API Key
   - 系统会自动保存

2. **后续使用**：
   - 启动应用
   - API Key 自动加载
   - 直接使用，无需重新输入

3. **更新 Key**：
   - 输入新 Key
   - 自动保存替换旧 Key

4. **清除 Key**：
   - 点击"清除密钥"按钮
   - 下次需要重新输入

## 📝 注意事项

1. **不要分享配置文件**：`.deepseek_config.json` 包含您的 API Key，不要分享给他人
2. **定期检查**：如果 API Key 泄露，及时在 DeepSeek 平台重置
3. **备份重要**：如果担心丢失，可以手动备份配置文件
4. **多电脑使用**：每台电脑需要单独配置，不会自动同步

