# 💾 保存功能说明

## 功能概述

系统现在支持多种保存功能，可以将生成的报告、问答记录等保存到本地。

## 📋 保存功能列表

### 1. 总结报告保存

生成知识库总结报告后，可以以多种格式保存：

#### 保存格式
- **📄 TXT格式**：纯文本格式，适合快速查看
- **📝 Markdown格式**：带格式的Markdown文件，包含标题和时间戳
- **📊 JSON格式**：结构化数据，包含元数据（生成时间、文档数量、文档列表等）

#### 保存方式
1. **下载保存**：点击对应的下载按钮，文件会下载到浏览器的默认下载目录
2. **自动保存到本地**：勾选"💾 同时自动保存到本地"选项，文件会自动保存到项目目录下的 `saved_reports/` 文件夹

#### 保存位置
- 下载保存：浏览器的默认下载目录
- 自动保存：`./saved_reports/` 目录

### 2. 对话历史保存

在"对话历史"区域可以保存所有问答记录：

#### 保存内容
- 所有问答记录（问题和答案）
- 生成时间
- 文档数量信息

#### 保存格式
- **Markdown格式**：格式化的对话记录，便于阅读和分享

#### 使用方法
1. 展开"🗣️ 对话历史"
2. 点击"💾 保存对话"按钮
3. 文件会下载为 `对话历史_YYYYMMDD_HHMMSS.md`

### 3. 单个问答保存

每次问答后可以单独保存该问答：

#### 保存内容
- 问题
- 答案
- 生成时间

#### 保存方式
1. **手动保存**：点击"💾 保存此问答"按钮下载
2. **自动保存**：勾选"自动保存"选项，问答会自动保存到 `saved_qa/` 目录

#### 保存位置
- 手动保存：浏览器的默认下载目录
- 自动保存：`./saved_qa/` 目录

## 📁 文件结构

保存后的文件结构：

```
knowledge-base/
├── saved_reports/          # 总结报告保存目录
│   ├── 知识库总结_20241201_143022.txt
│   ├── 知识库总结_20241201_143022.md
│   └── ...
├── saved_qa/               # 问答记录保存目录
│   ├── 问答_20241201_143500.md
│   └── ...
└── ...
```

## 💡 使用建议

### 总结报告
- **TXT格式**：适合快速查看和简单编辑
- **Markdown格式**：适合文档整理和分享（推荐）
- **JSON格式**：适合程序处理和数据分析

### 对话历史
- 建议定期保存对话历史，避免清空后丢失
- 可以在清空对话前先保存历史记录

### 单个问答
- 对于重要的问答，建议立即保存
- 可以开启自动保存功能，避免遗漏重要内容

## 🔧 注意事项

1. **文件编码**：所有保存的文件都使用 UTF-8 编码，支持中文
2. **文件命名**：使用时间戳命名，格式为 `YYYYMMDD_HHMMSS`
3. **目录创建**：保存目录会在首次保存时自动创建
4. **权限问题**：如果遇到保存失败，请检查目录写入权限

## 📝 文件格式示例

### Markdown格式（总结报告）
```markdown
# 知识库总结报告

生成时间: 2024-12-01 14:30:22

---

[报告内容...]
```

### Markdown格式（对话历史）
```markdown
# 对话历史记录

生成时间: 2024-12-01 14:30:22
文档数量: 5

---

## 对话 1

**问题:** [问题内容]

**回答:**
[回答内容]

---
```

### JSON格式（总结报告）
```json
{
  "生成时间": "2024-12-01 14:30:22",
  "文档数量": 5,
  "文档列表": ["文档1.txt", "文档2.pdf", ...],
  "总结内容": "[报告内容...]"
}
```

## 🚀 快速开始

1. **生成报告后保存**：
   - 生成总结报告
   - 选择保存格式（TXT/Markdown/JSON）
   - 点击下载或开启自动保存

2. **保存对话历史**：
   - 展开"对话历史"
   - 点击"保存对话"按钮

3. **保存单个问答**：
   - 问答完成后
   - 点击"保存此问答"或开启自动保存

## ❓ 常见问题

### Q: 文件保存在哪里？
A: 
- 下载保存：浏览器的默认下载目录
- 自动保存：项目目录下的 `saved_reports/` 或 `saved_qa/` 文件夹

### Q: 可以修改保存目录吗？
A: 目前保存目录是固定的，未来版本可能会添加自定义路径功能。

### Q: 自动保存会占用很多空间吗？
A: 文本文件通常很小，不会占用太多空间。如果担心，可以定期清理旧文件。

### Q: 保存的文件可以删除吗？
A: 可以，这些文件都是普通文件，可以随时删除。

